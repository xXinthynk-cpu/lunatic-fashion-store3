<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ramadhan Luxury Admin</title>

<style>
:root{
--green:#0f2e1c;
--cream:#f5f1e6;
--gold:#d4af37;
}
body{
margin:0;
font-family:sans-serif;
background:var(--green);
color:var(--cream);
}
header{
background:var(--green);
padding:15px;
text-align:center;
color:var(--gold);
position:sticky;
top:0;
}
button{
background:var(--gold);
border:none;
padding:8px 12px;
margin:5px 0;
cursor:pointer;
border-radius:5px;
}
.products{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:15px;
padding:15px;
}
.card{
background:var(--cream);
color:#000;
border-radius:10px;
overflow:hidden;
}
.card img{
width:100%;
height:220px;
object-fit:cover;
}
.card-body{
padding:10px;
}
.admin-panel{
background:#111;
padding:15px;
display:none;
}
input,select{
width:100%;
padding:6px;
margin:5px 0;
}
.login{
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
height:100vh;
}
.hidden{display:none;}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="login" id="loginPage">
<h2>Login Admin</h2>
<input type="text" id="username" placeholder="Username">
<input type="password" id="password" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<!-- WEBSITE -->
<div id="mainPage" class="hidden">

<header>
<h1>ðŸŒ™ Ramadhan Luxury Store</h1>
<button onclick="toggleAdmin()">Admin Panel</button>
</header>

<!-- ADMIN PANEL -->
<div class="admin-panel" id="adminPanel">
<h3>Tambah / Edit Produk</h3>
<input type="hidden" id="editIndex">
<input type="text" id="title" placeholder="Nama Produk">
<input type="number" id="price" placeholder="Harga">
<input type="number" id="stock" placeholder="Stok">
<select id="category">
<option value="featured">Featured</option>
<option value="gamis">Gamis</option>
<option value="anak">Celana Anak</option>
</select>
<input type="file" id="imageInput">
<button onclick="saveProduct()">Simpan Produk</button>
</div>

<h2 style="text-align:center">Produk</h2>
<div class="products" id="productList"></div>

</div>

<script>

let products=[];
let imageBase64="";

// LOAD DATA
function loadProducts(){
let data=localStorage.getItem("products");
if(data){
products=JSON.parse(data);
}else{
products=[
{title:"Gamis Emerald",price:300000,stock:10,category:"featured",image:"https://picsum.photos/400?1"},
{title:"Couple Set",price:500000,stock:8,category:"featured",image:"https://picsum.photos/400?2"}
];
}
}
function saveToLocal(){
localStorage.setItem("products",JSON.stringify(products));
}

// LOGIN
function login(){
let u=document.getElementById("username").value;
let p=document.getElementById("password").value;
if(u==="admin" && p==="12345"){
document.getElementById("loginPage").classList.add("hidden");
document.getElementById("mainPage").classList.remove("hidden");
}else{
alert("Login gagal!");
}
}

// ADMIN PANEL
function toggleAdmin(){
let panel=document.getElementById("adminPanel");
panel.style.display=panel.style.display==="block"?"none":"block";
}

// DISPLAY PRODUK
function displayProducts(){
let list=document.getElementById("productList");
list.innerHTML="";
products.forEach((p,i)=>{
let diskon=Math.floor(p.price*0.7);
list.innerHTML+=`
<div class="card">
<img src="${p.image}">
<div class="card-body">
<h4>${p.title}</h4>
<p><s>Rp ${p.price.toLocaleString()}</s></p>
<p style="color:red">Rp ${diskon.toLocaleString()}</p>
<p>Stok: ${p.stock}</p>
<button onclick="editProduct(${i})">Edit</button>
<button onclick="deleteProduct(${i})">Hapus</button>
<button onclick="buyProduct(${i})">Beli</button>
</div>
</div>
`;
});
}

// UPLOAD GAMBAR
document.getElementById("imageInput").addEventListener("change",function(e){
let reader=new FileReader();
reader.onload=function(){
imageBase64=reader.result;
};
reader.readAsDataURL(e.target.files[0]);
});

// SAVE PRODUK
function saveProduct(){
let title=document.getElementById("title").value;
let price=document.getElementById("price").value;
let stock=document.getElementById("stock").value;
let category=document.getElementById("category").value;
let editIndex=document.getElementById("editIndex").value;

if(editIndex===""){
products.push({title,price:Number(price),stock:Number(stock),category,image:imageBase64});
}else{
products[editIndex]={title,price:Number(price),stock:Number(stock),category,image:imageBase64||products[editIndex].image};
document.getElementById("editIndex").value="";
}
saveToLocal();
displayProducts();
alert("Produk disimpan!");
}

// EDIT
function editProduct(i){
let p=products[i];
document.getElementById("title").value=p.title;
document.getElementById("price").value=p.price;
document.getElementById("stock").value=p.stock;
document.getElementById("category").value=p.category;
document.getElementById("editIndex").value=i;
toggleAdmin();
}

// DELETE
function deleteProduct(i){
if(confirm("Hapus produk?")){
products.splice(i,1);
saveToLocal();
displayProducts();
}
}

// BELI (stok otomatis berkurang)
function buyProduct(i){
if(products[i].stock>0){
products[i].stock--;
saveToLocal();
displayProducts();
alert("Berhasil beli!");
}else{
alert("Stok habis!");
}
}

loadProducts();
displayProducts();

</script>
</body>
</html>
